import "./ui/Db.css";

export default function Db() {
    return (
        <>
            <div className="text-center">
                <h1 className="display-4">
                    <i className="bi bi-database"></i> База даних. Контекст
                </h1>
            </div>
            <p>
                База даних є центральною частиною сайтів (бекенду), забезпечуючи
                постійне сховище даних, а також їх синхронізацію за наявністю
                кількох фронтендів (сайт, застосунок, десктоп тощо).
            </p>
            <p>
                Entity Framework - ORM інструмент, який спрощує відображення
                даних на об'єкти (та навпаки), встановлюються додаванням Nuget
                пакетів:
            </p>
            <ul>
                <li>
                    Microsoft.EntityFrameworkCore - базовий інструментарій
                    фреймворка. Перша цифра версії відповідає за версію .NET,
                    тому при встановленні звернути увагу на узгодженість версій
                    проєкту та фреймворку
                </li>
                <li>
                    Microsoft.EntityFrameworkCore - інструменти командного рядка
                    для роботи з контекстом та міграціями
                </li>
                <li>
                    В залежності від обраної СУДБ потрібний пакет з "драйверами"
                    - імплементація EF інтерфейсів під конкретну базу даних. Для
                    наявного у Студії MS Sql - це
                    Microsoft.EntityFrameworkCore.SqlServer
                </li>
            </ul>

            <h2>Контекст даних</h2>
            <p>
                Контекст (оточення) - об'єкт EF, що поєднує в собі усі засоби
                для роботи з БД. Зазвичай, один контекст - одна БД. Налаштування
                контексту полягає у наступних кроках
            </p>
            <ul>
                <li>
                    Оголошуємо клас-нащадок DbContext, задаємо параметричний
                    конструктор (див. DataContext.cs)
                </li>
                <li>
                    Створюємо рядок підключенням до існуючої СУБД, але
                    неіснуючої (або порожньої БД) (див. appsettings.json)
                </li>
                <li>
                    Реєструємо контекст даних у сервісах проєкту (див.
                    Program.cs)
                </li>
                <li>
                    ORM - відображення даних та об'єктів. EF має два режими:
                    Code-First та Data-First. Перший - більш зручний для нових
                    проєктів, оскільки дозволяє описати дані так, як це зручніше
                    для коду (для програмного використання). Зазвичай такі
                    об'єкти групують до директорії Entities або DTO (Data
                    transfer object) (див. UserRole.cs)
                </li>
                <li>Додаємо сутності до контексту (див. DataContext.cs)</li>
                <li>
                    Додаємо налаштування зв'язків між сутномтями (див.
                    OnModelCreating())
                </li>
                <li>
                    Створюємо та впроваджуємо міграцію (Add-Migration Initial,
                    Update-Database)
                </li>
            </ul>

            <h3> Сідування контексту</h3>
            <p>
                Сідування (seed - зерно) - внесення початкових даних. Зокрема,
                першого адміністратора (оскільки тільки адміністратор може
                змінити роль іншому користувачу, то перший адміністратор має
                бути від старту системи)
            </p>
        </>
    );
}
